{
  "version": 3,
  "sources": ["../src/index.ts", "../../runtime-core/src/renderer.ts", "../../shared/src/index.ts", "../../runtime-core/src/vnode.ts", "../../runtime-core/src/h.ts", "../src/nodeOps.ts", "../src/modules/attr.ts", "../src/modules/class.ts", "../src/modules/event.ts", "../src/modules/style.ts", "../src/patchProp.ts"],
  "sourcesContent": ["import { createRenderer } from \"@vue/runtime-core\";\nimport { nodeOps } from \"./nodeOps\";\nimport { patchProp } from \"./patchProp\";\n\nexport * from \"@vue/runtime-core\";\n\nconst renderOptions = Object.assign(nodeOps, { patchProp });\n\nexport function render(vnode, container) {\n  createRenderer(renderOptions).render(vnode, container);\n}\n\n// createRenderer(\n//   renderOptions.render(h(\"h1\", \"hello\"), document.getElementById(\"app\")),\n// );\n", "export function createRenderer(renderOptions) {\n  const render = (vnode, container) => {};\n  return {\n    render,\n  };\n}\n", "export const isObject = (value: any) => {\n  return typeof value === \"object\" && value !== null;\n};\n\nexport const isString = (value: any) => {\n  return typeof value === \"string\";\n};\nexport const isNumber = (value: any) => {\n  return typeof value === \"number\";\n};\n\nexport const isFunction = (value: any) => {\n  return typeof value === \"function\";\n};\n\nexport const isArray = Array.isArray;\n\nexport const assign = Object.assign;\n\nexport const enum ShapeFlags {\n  ELEMENT = 1,\n  FUNCTIONAL_COMPONENT = 1 << 1,\n  STATEFUL_COMPONENT = 1 << 2,\n  TEXT_CHILDREN = 1 << 3,\n  ARRAY_CHILDREN = 1 << 4,\n  SLOTS_CHILDREN = 1 << 5,\n  TELEPORT = 1 << 6,\n  SUSPENSE = 1 << 7,\n  COMPONENT_SHOULD_KEEP_ALIVE = 1 << 8,\n  COMPONENT_KEPT_ALIVE = 1 << 9,\n  COMPONENT = ShapeFlags.STATEFUL_COMPONENT | ShapeFlags.FUNCTIONAL_COMPONENT,\n}\n", "// type props children\n\nimport { isArray, isString, ShapeFlags } from \"@vue/shared\";\n\nexport function isVnode(value) {\n  return !!(value && value.__v_isVnode);\n}\n\n/**\n * \u7A7F\u4EF6\u865A\u62DFdom\n * @param type\n * @param props\n * @param children\n * \u7EC4\u4EF6\u3001\u5143\u7D20\u3001\u6587\u672C\n */\nexport function createVnode(type, props, children = null) {\n  // \u7EC4\u5408\u65B9\u6848 shapeFlag \u60F3\u77E5\u9053\u4E00\u4E2A\u5143\u7D20\u4E2D\u5305\u542B\u7684\u662F\u591A\u4E2A\u513F\u5B50\u8FD8\u662F\u4E00\u4E2A\u513F\u5B50\n  let shapeFlag = isString(type) ? ShapeFlags.ELEMENT : 0;\n  // \u865A\u62DFDOM\u5C31\u662F\u4E00\u4E2A\u5BF9\u8C61\uFF0Cdiff\u7B97\u6CD5\uFF0C\u771F\u5B9EDOM\u5C5E\u6027\u6BD4\u8F83\u591A\n  const vnode = {\n    type,\n    props,\n    children,\n    key: props?.[\"key\"],\n    el: null, // \u865A\u62DF\u8282\u70B9\u4E0A\u5BF9\u5E94\u7684\u771F\u5B9E\u8282\u70B9\uFF0C\u540E\u7EEDdiff\u7B97\u6CD5\n    __v_isVnode: true,\n    shapeFlag,\n  };\n  if (children) {\n    let type = 0;\n    if (isArray(children)) {\n      type = ShapeFlags.ARRAY_CHILDREN;\n    } else {\n      children = String(children);\n      type = ShapeFlags.TEXT_CHILDREN;\n    }\n    vnode.shapeFlag |= type;\n  }\n  return vnode;\n}\n", "// h('div')\n// h('div', {style: {'color': 'red'}})\n// h('div', {style: {'color': 'red'}}, 'hello')\n// h('div', 'hello')\n// h('div',null, 'hello', ;'world')\n// h('div',null, h('span'))\n\nimport { isArray, isObject } from \"@vue/shared\";\nimport { createVnode, isVnode } from \"./vnode\";\n\n// h('div',null, [h('span')])\nexport function h(type, propsChildren, children) {\n  const l = arguments.length;\n\n  if (l === 2) {\n    if (isObject(propsChildren) && !isArray(propsChildren)) {\n      if (isVnode(propsChildren)) {\n        createVnode(type, null, [propsChildren]);\n      }\n      return createVnode(type, propsChildren);\n    } else {\n      return createVnode(type, null, propsChildren);\n    }\n  } else {\n    if (l > 3) {\n      children = Array.from(arguments).slice(2);\n    } else if (l === 3 && isVnode(children)) {\n      children = [children];\n    }\n    // \u5176\u4ED6\n    return createVnode(type, children, propsChildren);\n  }\n}\n", "export const nodeOps = {\n  // \u589E \u5220 \u6539 \u67E5\n  insert(child, parent, anchor = null) {\n    parent.insertBefore(child, anchor); //  insertBefore\u7B49\u4EF7\u4E8EappendChild\n  },\n  remove(child) {\n    const parentNode = child.parentNode;\n    if (parentNode) {\n      parentNode.removeChild(child);\n    }\n  },\n  setElementText(el, text) {\n    el.textContent = text;\n  },\n  setText(node, text) {\n    // node: document.createTextNode()\n    node.nodeValue = text;\n  },\n  querySelector(selector) {\n    return document.querySelector(selector);\n  },\n  parentNode(node) {\n    return node.parentNode;\n  },\n  /**\n   * \u83B7\u53D6\u5144\u5F1F\u8282\u70B9\n   * @param node\n   * @returns\n   */\n  nextSibling(node) {\n    return node.nextSibling;\n  },\n  createElement(tagName) {\n    return document.createElement(tagName);\n  },\n  createText(text) {\n    return document.createTextNode(text);\n  },\n  // \u6587\u672C\u8282\u70B9\uFF0C\u5143\u7D20\u4E2D\u7684\u5185\u5BB9\n};\n", "export function patchAttr(el, key, nextValue) {\n  if (nextValue) {\n    el.setAttribute(key, nextValue);\n  } else {\n    el.removeAttribute(key);\n  }\n}\n", "export function patchClass(el, nextValue) {\n  if (nextValue === null) {\n    el.removeAttribute(\"class\");\n  } else {\n    el.cassName = nextValue;\n  }\n}\n", "function createInvoker(callback) {\n  const invoker = (e) => {\n    invoker.value(e);\n  };\n  invoker.value = callback();\n  return invoker;\n}\nexport function patchEvent(el, eventName, nextValue) {\n  // \u81EA\u5B9A\u4E49\u4E8B\u4EF6\uFF0C\u91CC\u9762\u8C03\u7528\u7ED1\u5B9A\u7684\u65B9\u6CD5\n  let invokers = el._vei || (el._vei = {});\n\n  let exits = invokers[eventName];\n  if (exits && nextValue) {\n    // \u5DF2\u7ECF\u7ED1\u5B9A\u8FC7\u4E8B\u4EF6\n    exits.value = nextValue;\n  } else {\n    // onClick -> click\n    let event = eventName.slice(2).toLowerCase();\n    if (nextValue) {\n      const invoker = (invokers[eventName] = createInvoker(nextValue));\n      el.addEventListener(event, invoker);\n    } else if (exits) {\n      el.removeEventListener(event, exits);\n      invokers[eventName] = undefined;\n    }\n  }\n}\n", "export function patchStyle(el, prevValue, nextValue) {\n  // \u6837\u5F0F\u9700\u8981\u6BD4\u5BF9\u5DEE\u5F02\n  for (const key in nextValue) {\n    // \u7528\u65B0\u7684\u76F4\u63A5\u8986\u76D6\n    el.style[key] = nextValue[key];\n  }\n\n  if (prevValue) {\n    for (const key in prevValue) {\n      if (nextValue[key] === null) {\n        el.style[key] = null;\n      }\n    }\n  }\n}\n", "import { patchAttr } from \"./modules/attr\";\nimport { patchClass } from \"./modules/class\";\nimport { patchEvent } from \"./modules/event\";\nimport { patchStyle } from \"./modules/style\";\n\n/**\n * dom\u5C5E\u6027\u7684\u64CD\u4F5Capi\n * @param el\n * @param key\n * @param prevValue\n * @param nextValue\n */\nexport function patchProp(el, key, prevValue, nextValue) {\n  // \u7C7B\u540D el.className\n  // \u6837\u5F0F el.style\n  // \u4E8B\u4EF6 events\n  // \u666E\u901A\u5C5E\u6027\n  if (key === \"class\") {\n    patchClass(el, nextValue);\n  } else if (key === \"style\") {\n    patchStyle(el, prevValue, nextValue);\n  } else if (/^on[^a-z]/.test(key)) {\n    patchEvent(el, key, nextValue);\n  } else {\n    patchAttr(el, key, nextValue);\n  }\n}\n"],
  "mappings": "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",
  "names": []
}
